# MTG Card Scanner Configuration
# Alle Parameter in einer Datei!

# Database Configuration (Simple JSON-based)
database:
  path: "./data/cards.json"
  # Embedding Mode: "original" (empfohlen: schneller, weniger Speicher) oder "augmented" (mehr Variationen)
  embedding_mode: "original"
  
# Vector Configuration  
vector:
  dimension: 512

# Data Directories
data:
  scryfall_images: "./data/scryfall_images"
  scryfall_augmented: "./data/scryfall_augmented" 
  camera_images: "./data/camera_images"
  output_dir: "./output_matches"

# Model Configuration
model:
  weights_path: "./models/encoder_mtg_cards.pt"
  embed_dim: 512
  
# Training Parameters
training:
  batch_size: 8           # Reduziert für große Bilder
  learning_rate: 0.0001   # 1e-4
  epochs: 50              # Mehr Epochen für bessere Konvergenz
  margin: 0.2             # Triplet Loss Margin
  workers: 2              # DataLoader Workers
  seed: 42
  
  # Early Stopping
  early_stopping_patience: 5      # Anzahl Epochen ohne Verbesserung
  min_loss_threshold: 0.001        # Training stoppt wenn Loss unter diesem Wert
  
  # Automatische Bildgrößen-Erkennung (Standard: MTG Aspect-Ratio)
  auto_detect_size: true
  target_width: 224       # Fallback wenn auto_detect_size = false
  target_height: 320      # Fallback wenn auto_detect_size = false

# Augmentation Settings (für augment_cards.py)
augmentation:
  num_augmentations: 30           # Erhöht für 512D Training
  brightness_min: 0.8            # Korrigiert: Camera-Bilder sind heller (0.8 = 20% dunkler)
  brightness_max: 1.2            # Korrigiert: Camera-Bilder können heller sein (1.2 = 20% heller)
  contrast_min: 0.97             # Aus Camera-Analyse (sehr gut)
  contrast_max: 1.01             # Aus Camera-Analyse (sehr gut)
  blur_max: 3.2                  # Aus Camera-Analyse
  noise_max: 5.0                 # Aus Camera-Analyse (realistisches Sensorrauschen)
  rotation_max: 2.0              # Realistisch für stabile Kartenlage (statt 1.0)
  perspective: 0.05              # Unverändert
  shadow: 0.14                   # Aus Camera-Analyse (statt 0.3)
  background_color: "white"  # Hintergrundfarbe für Rotation/Perspektive: "white" oder "black"

# API Defaults
api:
  host: "0.0.0.0"
  port: 8000
  top_k_default: 10
  distance_threshold_default: 0.3
  
# Hardware Settings
hardware:
  use_cuda: true
  camera_enabled: true